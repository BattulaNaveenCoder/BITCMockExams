import{r as l,R as q}from"./react-vendor-DKmEC8F-.js";function H(o={}){const{nonce:i,onScriptLoadSuccess:n,onScriptLoadError:d}=o,[e,u]=l.useState(!1),v=l.useRef(n);v.current=n;const g=l.useRef(d);return g.current=d,l.useEffect(()=>{const t=document.createElement("script");return t.src="https://accounts.google.com/gsi/client",t.async=!0,t.defer=!0,t.nonce=i,t.onload=()=>{var c;u(!0),(c=v.current)===null||c===void 0||c.call(v)},t.onerror=()=>{var c;u(!1),(c=g.current)===null||c===void 0||c.call(g)},document.body.appendChild(t),()=>{document.body.removeChild(t)}},[i]),e}const F=l.createContext(null);function z({clientId:o,nonce:i,onScriptLoadSuccess:n,onScriptLoadError:d,children:e}){const u=H({nonce:i,onScriptLoadSuccess:n,onScriptLoadError:d}),v=l.useMemo(()=>({clientId:o,scriptLoadedSuccessfully:u}),[o,u]);return q.createElement(F.Provider,{value:v},e)}function j(){const o=l.useContext(F);if(!o)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return o}function T(o){var i;return(i=o?.clientId)!==null&&i!==void 0?i:o?.client_id}const V={large:40,medium:32,small:20};function D({onSuccess:o,onError:i,useOneTap:n,promptMomentNotification:d,type:e="standard",theme:u="outline",size:v="large",text:g,shape:t,logo_alignment:c,width:S,locale:m,click_listener:y,containerProps:_,...A}){const E=l.useRef(null),{clientId:r,scriptLoadedSuccessfully:w}=j(),C=l.useRef(o);C.current=o;const G=l.useRef(i);G.current=i;const f=l.useRef(d);return f.current=d,l.useEffect(()=>{var a,b,I,k,s,h,L,x,M;if(w)return(I=(b=(a=window?.google)===null||a===void 0?void 0:a.accounts)===null||b===void 0?void 0:b.id)===null||I===void 0||I.initialize({client_id:r,callback:R=>{var p;if(!R?.credential)return(p=G.current)===null||p===void 0?void 0:p.call(G);const{credential:O,select_by:B}=R;C.current({credential:O,clientId:T(R),select_by:B})},...A}),(h=(s=(k=window?.google)===null||k===void 0?void 0:k.accounts)===null||s===void 0?void 0:s.id)===null||h===void 0||h.renderButton(E.current,{type:e,theme:u,size:v,text:g,shape:t,logo_alignment:c,width:S,locale:m,click_listener:y}),n&&((M=(x=(L=window?.google)===null||L===void 0?void 0:L.accounts)===null||x===void 0?void 0:x.id)===null||M===void 0||M.prompt(f.current)),()=>{var R,p,O;n&&((O=(p=(R=window?.google)===null||R===void 0?void 0:R.accounts)===null||p===void 0?void 0:p.id)===null||O===void 0||O.cancel())}},[r,w,n,e,u,v,g,t,c,S,m]),q.createElement("div",{..._,ref:E,style:{height:V[v],..._?.style}})}function J(){var o,i,n;(n=(i=(o=window?.google)===null||o===void 0?void 0:o.accounts)===null||i===void 0?void 0:i.id)===null||n===void 0||n.disableAutoSelect()}function K({flow:o="implicit",scope:i="",onSuccess:n,onError:d,onNonOAuthError:e,overrideScope:u,state:v,...g}){const{clientId:t,scriptLoadedSuccessfully:c}=j(),S=l.useRef(),m=l.useRef(n);m.current=n;const y=l.useRef(d);y.current=d;const _=l.useRef(e);_.current=e,l.useEffect(()=>{var r,w;if(!c)return;const C=o==="implicit"?"initTokenClient":"initCodeClient",G=(w=(r=window?.google)===null||r===void 0?void 0:r.accounts)===null||w===void 0?void 0:w.oauth2[C]({client_id:t,scope:u?i:`openid profile email ${i}`,callback:f=>{var a,b;if(f.error)return(a=y.current)===null||a===void 0?void 0:a.call(y,f);(b=m.current)===null||b===void 0||b.call(m,f)},error_callback:f=>{var a;(a=_.current)===null||a===void 0||a.call(_,f)},state:v,...g});S.current=G},[t,c,o,i,v]);const A=l.useCallback(r=>{var w;return(w=S.current)===null||w===void 0?void 0:w.requestAccessToken(r)},[]),E=l.useCallback(()=>{var r;return(r=S.current)===null||r===void 0?void 0:r.requestCode()},[]);return o==="implicit"?A:E}function N({onSuccess:o,onError:i,promptMomentNotification:n,cancel_on_tap_outside:d,prompt_parent_id:e,state_cookie_domain:u,hosted_domain:v,use_fedcm_for_prompt:g=!1,use_fedcm_for_button:t=!1,disabled:c,auto_select:S}){const{clientId:m,scriptLoadedSuccessfully:y}=j(),_=l.useRef(o);_.current=o;const A=l.useRef(i);A.current=i;const E=l.useRef(n);E.current=n,l.useEffect(()=>{var r,w,C,G,f,a,b,I,k;if(y){if(c){(C=(w=(r=window?.google)===null||r===void 0?void 0:r.accounts)===null||w===void 0?void 0:w.id)===null||C===void 0||C.cancel();return}return(a=(f=(G=window?.google)===null||G===void 0?void 0:G.accounts)===null||f===void 0?void 0:f.id)===null||a===void 0||a.initialize({client_id:m,callback:s=>{var h;if(!s?.credential)return(h=A.current)===null||h===void 0?void 0:h.call(A);const{credential:L,select_by:x}=s;_.current({credential:L,clientId:T(s),select_by:x})},hosted_domain:v,cancel_on_tap_outside:d,prompt_parent_id:e,state_cookie_domain:u,use_fedcm_for_prompt:g,use_fedcm_for_button:t,auto_select:S}),(k=(I=(b=window?.google)===null||b===void 0?void 0:b.accounts)===null||I===void 0?void 0:I.id)===null||k===void 0||k.prompt(E.current),()=>{var s,h,L;(L=(h=(s=window?.google)===null||s===void 0?void 0:s.accounts)===null||h===void 0?void 0:h.id)===null||L===void 0||L.cancel()}}},[m,y,d,e,u,v,g,t,c,S])}function P(o,i,...n){var d,e,u;return window?.google&&((u=(e=(d=window?.google)===null||d===void 0?void 0:d.accounts)===null||e===void 0?void 0:e.oauth2)===null||u===void 0?void 0:u.hasGrantedAllScopes(o,i,...n))||!1}function Q(o,i,...n){var d,e,u;return window?.google&&((u=(e=(d=window?.google)===null||d===void 0?void 0:d.accounts)===null||e===void 0?void 0:e.oauth2)===null||u===void 0?void 0:u.hasGrantedAnyScope(o,i,...n))||!1}export{D as GoogleLogin,z as GoogleOAuthProvider,J as googleLogout,P as hasGrantedAllScopesGoogle,Q as hasGrantedAnyScopeGoogle,K as useGoogleLogin,j as useGoogleOAuth,N as useGoogleOneTapLogin};
