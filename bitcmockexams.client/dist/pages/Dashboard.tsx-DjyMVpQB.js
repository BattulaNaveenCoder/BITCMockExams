import{r as f,j as e}from"../chunks/react-vendor-DKmEC8F-.js";import{a as N,u as w,n as y,g as I,B as T}from"../assets/index-D77BABSw.js";import{u as D}from"../chunks/tests-DgJ3-0M2.js";import{S as r}from"../chunks/Skeleton-CRRsf-47.js";import{H as S}from"../chunks/icons-sFf4zKND.js";import{u as p}from"../chunks/router-D05wPq9Z.js";import"../chunks/jwt-VWaDGczM.js";import"../chunks/http-client-B9ygI19o.js";function j(t){return new Date(t)}function P(t,m){return f.useMemo(()=>{const n=j(t),d=j(m),u=new Date,l=d.getTime()-n.getTime(),c=Math.max(0,Math.min(u.getTime()-n.getTime(),l)),i=Math.max(0,d.getTime()-u.getTime()),x=l>0?c/l*100:0,a=o=>Math.floor(o/(1e3*60*60*24));return{percentage:Number(x.toFixed(1)),elapsedDays:a(c),remainingDays:a(i)}},[t,m])}function E({code:t,title:m,start:n,end:d,pathId:u,suiteId:l}){const c=p(),i=P(n,d);return e.jsxs("div",{className:"relative rounded-3xl border border-[#cfe6ff] bg-gradient-to-b from-[#eaf4ff] via-[#e1f0ff] to-[#d7ecff] shadow-sm p-6 cursor-pointer transition-all duration-300 ease-out hover:-translate-y-1 hover:shadow-xl hover:shadow-[#93c5fd]/40 hover:border-[#93c5fd] focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-[#1e88e5]/30",onClick:()=>{c(`/exams/${u||t}`)},children:[e.jsx("h3",{className:"mt-3 text-2xl md:text-3xl font-semibold text-[#111827] leading-snug",children:m}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-2xl bg-white/70 backdrop-blur-sm border border-border/60 p-4",children:[e.jsx("div",{className:"text-[#6b7280] text-xs font-semibold",children:"START DATE"}),e.jsx("div",{className:"text-[#111827] text-base md:text-lg font-semibold mt-1",children:n})]}),e.jsxs("div",{className:"rounded-2xl bg-white/70 backdrop-blur-sm border border-border/60 p-4",children:[e.jsx("div",{className:"text-[#6b7280] text-xs font-semibold",children:"END DATE"}),e.jsx("div",{className:"text-[#111827] text-base md:text-lg font-semibold mt-1",children:d})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-[#6b7280] text-sm",children:"Progress"}),e.jsxs("div",{className:"text-[#1e88e5] text-sm font-semibold",children:[i.percentage,"%"]})]}),e.jsx("div",{className:"h-3 w-full rounded-full bg-[#d0e8ff] overflow-hidden",children:e.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-[#64b5f6] via-[#1e88e5] to-[#1565c0]",style:{width:`${Math.min(100,Math.max(0,i.percentage))}%`}})})]})]})}function R(){const{user:t}=N(),{getTestsByUserId:m}=D(),{suites:n}=w(),[d,u]=f.useState([]),[l,c]=f.useState(!1),[i,x]=f.useState(null);return f.useEffect(()=>{const o=y(t).email,h=I(t);if(!o||!h){x("Missing user info");return}c(!0),x(null),(async()=>{try{const b=await m(h,o),g={};(n||[]).forEach(s=>{s.PathId&&s.PKTestSuiteId&&(g[s.PathId]=s.PKTestSuiteId)});const v=b.map(s=>({code:s.PathId??s.TestId,title:s.TestName,start:new Date(s.TestStartDate).toLocaleDateString(),end:new Date(s.TestEndDate).toLocaleDateString(),pathId:s.PathId,suiteId:s.PathId?g[s.PathId]:void 0}));u(v)}catch{x("Failed to load subscriptions")}finally{c(!1)}})()},[t]),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l&&e.jsx(e.Fragment,{children:Array.from({length:6}).map((a,o)=>e.jsx(M,{},o))}),i&&e.jsx("div",{className:"col-span-full text-center text-red-600",children:i}),!l&&!i&&d.length===0&&e.jsx(k,{}),d.map((a,o)=>e.jsx(E,{code:a.code,title:a.title,start:a.start,end:a.end,pathId:a.pathId,suiteId:a.suiteId},o))]})})}function M(){return e.jsxs("div",{className:"relative rounded-3xl border border-[#cfe6ff] bg-gradient-to-b from-[#eaf4ff] via-[#e1f0ff] to-[#d7ecff] shadow-sm p-6",children:[e.jsx("div",{className:"mb-2",children:e.jsx(r,{className:"h-4 w-24 bg-[#d0e8ff]",rounded:"rounded-full"})}),e.jsx("div",{className:"mt-3",children:e.jsx(r,{className:"h-8 w-3/4 bg-[#d0e8ff]",rounded:"rounded-xl"})}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-2xl bg-white/70 backdrop-blur-sm border border-border/60 p-4",children:[e.jsx(r,{className:"h-3 w-20 bg-gray-200/80",rounded:"rounded-md"}),e.jsx("div",{className:"mt-2",children:e.jsx(r,{className:"h-5 w-28 bg-gray-200/80",rounded:"rounded-md"})})]}),e.jsxs("div",{className:"rounded-2xl bg-white/70 backdrop-blur-sm border border-border/60 p-4",children:[e.jsx(r,{className:"h-3 w-20 bg-gray-200/80",rounded:"rounded-md"}),e.jsx("div",{className:"mt-2",children:e.jsx(r,{className:"h-5 w-28 bg-gray-200/80",rounded:"rounded-md"})})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(r,{className:"h-4 w-20 bg-gray-200/80",rounded:"rounded-md"}),e.jsx(r,{className:"h-4 w-10 bg-gray-200/80",rounded:"rounded-md"})]}),e.jsx("div",{className:"h-3 w-full rounded-full bg-[#d0e8ff] overflow-hidden",children:e.jsx(r,{className:"h-3 w-2/3 bg-gradient-to-r from-[#64b5f6] via-[#1e88e5] to-[#1565c0]",rounded:"rounded-full"})})]})]})}function k(){const t=p();return e.jsx("div",{className:"col-span-full",children:e.jsxs("div",{className:"relative rounded-3xl border border-[#cfe6ff] bg-gradient-to-b from-[#eaf4ff] via-[#e1f0ff] to-[#d7ecff] shadow-sm p-10 text-center",children:[e.jsx("div",{className:"mx-auto mb-6 h-16 w-16 rounded-2xl bg-white/80 backdrop-blur-sm border border-[#cfe6ff] flex items-center justify-center shadow-sm",children:e.jsx(S,{className:"h-8 w-8 text-[#1e88e5]","aria-hidden":"true"})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-semibold text-[#111827]",children:"No subscriptions yet"}),e.jsx("p",{className:"mt-2 text-[#6b7280] max-w-md mx-auto",children:"You donâ€™t have any active subscriptions. Browse certification exams to get started."}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(T,{variant:"primary",size:"medium",onClick:()=>t("/certification-exams"),children:"Browse Certification Exams"})})]})})}export{R as default};
