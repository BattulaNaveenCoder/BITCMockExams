import{r as n,j as e}from"../chunks/react-vendor-DKmEC8F-.js";import{d as ys,p as Ns,n as vs,a as Is,g as Cs,c as Ss,B as w}from"../assets/index-D77BABSw.js";import{S as m}from"../chunks/Skeleton-CRRsf-47.js";import{w as ks,c as Qs,x as Ts,y as Ps,z as Es,A as Ms,B as Rs,C as Fs,o as Ks,D as Os}from"../chunks/icons-sFf4zKND.js";import{U as Ds}from"../chunks/UnlockQuestionsModal-CChMRlC4.js";import{u as Ls}from"../chunks/tests-DgJ3-0M2.js";import{u as Us}from"../chunks/auth-EO5UMYcE.js";import{e as As}from"../chunks/crypto-sz_6m3EK.js";import{u as Bs,d as Vs,c as $s,L as Pe}from"../chunks/router-D05wPq9Z.js";import"../chunks/jwt-VWaDGczM.js";import"../chunks/http-client-B9ygI19o.js";const Ws=()=>{const u=ys();return{getWalletBalance:async(y,R=!0)=>{let F=y;if(!F){const f=localStorage.getItem("AuthToken")||"",j=Ns(f);F=vs(j).userId||""}if(!F)return console.error("Wallet balance request missing userId"),0;const N=`https://subscriptionapi.azurewebsites.net/api/Wallet/GetBalance/${encodeURIComponent(F)}`;try{const f=await u.get(N,{showGlobalLoader:R}),j=f?.data??f;if(typeof j=="number")return j;if(typeof j=="string"){const U=Number(j);return Number.isFinite(U)?U:0}return 0}catch(f){return console.error("Failed to fetch wallet balance:",{userId:F,error:f}),0}}}},zs=`
  .html-content {
    line-height: 1.6;
  }
  .html-content p {
    margin-bottom: 1rem;
  }
  .html-content ul, .html-content ol {
    margin-left: 1.5rem;
    margin-bottom: 1rem;
  }
  .html-content li {
    margin-bottom: 0.5rem;
  }
  .html-content strong, .html-content b {
    font-weight: 600;
  }
  .html-content u {
    text-decoration: underline;
  }
  .html-content div {
    margin-bottom: 0.5rem;
  }
  .html-content br {
    display: block;
    margin-bottom: 0.5rem;
  }
  .html-content span {
    display: inline;
  }
  .html-content code {
    background-color: #f3f4f6;
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;
    font-family: monospace;
  }
  .html-content pre {
    background-color: #f3f4f6;
    padding: 1rem;
    border-radius: 0.5rem;
    overflow-x: auto;
    margin-bottom: 1rem;
  }
  .html-content table {
    border-collapse: collapse;
    width: 100%;
    margin-bottom: 1rem;
  }
  .html-content th, .html-content td {
    border: 1px solid #e5e7eb;
    padding: 0.5rem;
    text-align: left;
  }
  .html-content th {
    background-color: #f9fafb;
    font-weight: 600;
  }
  .html-content img {
    max-width: 100%;
    height: auto;
    border-radius: 0.5rem;
    margin: 1rem 0;
    display: block;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  }
  .html-content img[style*="float:left"], .html-content img[align="left"] {
    float: left;
    margin-right: 1rem;
    margin-bottom: 1rem;
  }
  .html-content img[style*="float:right"], .html-content img[align="right"] {
    float: right;
    margin-left: 1rem;
    margin-bottom: 1rem;
  }
  .html-content figure {
    margin: 1rem 0;
  }
  .html-content figcaption {
    font-size: 0.875rem;
    color: #6b7280;
    text-align: center;
    margin-top: 0.5rem;
  }
  .html-content a {
    color: #3b82f6;
    text-decoration: underline;
  }
  .html-content a:hover {
    color: #2563eb;
  }
`,se="ABCDEFGHIJKLMNOPQRSTUVWXYZ",Hs=u=>{const p=[...u];for(let y=p.length-1;y>0;y--){const R=Math.floor(Math.random()*(y+1));[p[y],p[R]]=[p[R],p[y]]}return p},te=(u,p,y)=>u?{PKBuyerTestId:u.PKBuyerTestId||"",FKTestId:u.FKTestId||"",Title:u.Title||"",SubTitle:u.SubTitle||"",Mode:u.Mode,Status:u.Status,DurationinSeconds:u.DurationinSeconds||0,DefaultTimeinSecondsForEachQuestion:u.DefaultTimeinSecondsForEachQuestion||0,TimeElapsedinSeconds:u.TimeElapsedinSeconds,QuestionTimeElapsedinSeconds:u.QuestionTimeElapsedinSeconds,CurrentQuestionIndex:p,PassPercentage:u.PassPercentage||0,TotalMarksAllocated:u.TotalMarksAllocated||0,IsPaused:u.IsPaused||!1,TestType:u.TestType||0,PriceInDollars:u.PriceInDollars||0,CanPauseAndResume:u.CanPauseAndResume||!1,IsScoreCalculated:u.IsScoreCalculated||!1,PreviousQuestion:y||{},Questions:u.Questions||[]}:null,Nt=()=>{const u=Bs(),{PathId:p,Title:y,TestId:R}=Vs(),[F]=$s(),ne=F.get("mode")||"0",{user:N}=Is(),f=n.useMemo(()=>Cs(N),[N]),j=n.useMemo(()=>N?.name||N?.username||"User",[N]),U=n.useMemo(()=>{const s=N;return s&&(s["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"]||s.email)||""},[N]),K=n.useMemo(()=>N?.role||"Student",[N]),{getTestSuiteByPathId:Ee}=Ss(),{getTestViewModel:Me,isTestSubscribed:Re,getCurrentExamQuestion:T,getVideosLinkForQuestion:Ys,getBuyerTestById:_s}=Ls();Us(),Ws();const[O,Js]=n.useState(R||null),[Gs,Xs]=n.useState(p||null),[P,Fe]=n.useState(!1),[E,Zs]=n.useState(!1),[Ke,qs]=n.useState(0),[H,Oe]=n.useState(null),[M,De]=n.useState(),[I]=n.useState(parseInt(ne)),[c,A]=n.useState(null),[l,xe]=n.useState(0),[v,ge]=n.useState(!1),[C,be]=n.useState(!1),[D,we]=n.useState(!1),[ae,Le]=n.useState(!1),[je,Ue]=n.useState(0),[ye,B]=n.useState([]),[Y,oe]=n.useState(""),[et,st]=n.useState(!1),[Ne,Ae]=n.useState(0),[x,_]=n.useState(1),[J,re]=n.useState(""),[G,Be]=n.useState(""),[tt,Ve]=n.useState(-1),[nt,$e]=n.useState(-1),[X,We]=n.useState(""),[ve,le]=n.useState(null),[ze,ie]=n.useState(!1),[He,Ye]=n.useState(""),[_e,Je]=n.useState(""),[Ge,Z]=n.useState(!1),[at,Ie]=n.useState(!1),[Xe,Ce]=n.useState(!1),[q,Ze]=n.useState(0),[qe,Se]=n.useState(0),[W,ce]=n.useState(""),[de,es]=n.useState(""),[ot,rt]=n.useState(!1),[lt,it]=n.useState(new Set),[ue,ee]=n.useState(!1);n.useEffect(()=>{if(!ue)return;const s=a=>{a.key==="Escape"&&ee(!1)};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[ue]);const[ss,ke]=n.useState(!0),[ts,ns]=n.useState(!0),[as,me]=n.useState(!1),os=n.useRef(!0),[rs,he]=n.useState(!0),[ct,dt]=n.useState(!1),S=n.useMemo(()=>c?.Questions||[],[c]),o=n.useMemo(()=>{const s=c?.Questions?.[l];return console.log("Current question:",s),s},[c,l]),ls=n.useMemo(()=>{const s=M?.trim()||"BITC";return encodeURIComponent(`Hello ${s} Mock Exam Support`)},[M]);n.useEffect(()=>{console.log("PracticeExam mounted with params:",{PathId:p,Title:y,TestId:R,modeParam:ne}),console.log("User info:",{userId:f,userName:j,userEmail:U,userRole:K}),console.log("Test ID:",O)},[]),n.useEffect(()=>{console.log("Test ViewModel updated:",{hasViewModel:!!c,questionsCount:c?.Questions?.length,currentIndex:l,currentQuestionId:o?.PKTestQuestionId})},[c,l,o]);const z=n.useMemo(()=>o?.options?o.options.filter(a=>a.IsCorrect).length>1:!1,[o]),k=n.useCallback(async s=>{if(console.log("goToQuestion called with index:",s),s<0||s>=S.length){console.log("Invalid index, aborting");return}if(v){console.log("Exam is paused, aborting");return}if(C){console.log("Exam is over, aborting API call");return}if(!c){console.log("No testViewModel, aborting");return}me(!0),xe(s),we(!1);const a=te(c,s,c.Questions[l]);if(!a){console.error("Failed to build payload"),me(!1);return}try{console.log("Fetching question details from API");const t=await T(C,!1,a,!1);if(console.log("Question data received:",t),t){const r=[...c.Questions],i=r[s],h=i?.SelectedOptionId??t.SelectedOptionId??"",d=h.split(",").filter(Boolean),b=(t.options||t.Options||[]).map((Q,$)=>{const fe=i?.options?.[$],pe=d.includes(String(Q.PKOptionId||Q.pkOptionId||""));return{...Q,isSelectedOption:pe||fe?.isSelectedOption||Q.isSelectedOption||!1}});r[s]={...i||{},Description:t.Description||i?.Description,ImageUrl:t.ImageUrl||i?.ImageUrl,options:b,ModuleName:t.ModuleName||i?.ModuleName,Explanation:t.Explanation||i?.Explanation,CourseURL:t.CourseURL||i?.CourseURL,ThumbNailes:t.ThumbNailes||i?.ThumbNailes,QuestionStatus:i?.QuestionStatus??t.QuestionStatus,isMarkedforReview:i?.isMarkedforReview??t.isMarkedforReview,SelectedOptionId:h,PKTestQuestionId:i?.PKTestQuestionId??t.PKTestQuestionId},A({...c,Questions:r})}}catch(t){console.error("Failed to fetch question data:",t)}finally{me(!1)}},[S.length,v,C,c,l,T]),is=n.useCallback(()=>{l<S.length-1&&k(l+1)},[l,S.length,k]),cs=n.useCallback(()=>{l>0&&k(l-1)},[l,k]),ds=n.useCallback(()=>{k(0)},[k]),us=n.useCallback(()=>{k(S.length-1)},[S.length,k]),ms=n.useCallback(async s=>{if(!o||!c)return;const a=[...o.options||[]];z?a[s]={...a[s],isSelectedOption:!a[s].isSelectedOption}:a.forEach((b,Q)=>{b.isSelectedOption=Q===s});const t=a.filter((b,Q)=>b.isSelectedOption).map(b=>b.PKOptionId).filter(Boolean).join(","),r=t?`${t},`:void 0,i=a.some(b=>b.isSelectedOption),h=o.isMarkedforReview?i?3:2:i?1:0,d=[...c.Questions];d[l]={...d[l],options:a,QuestionStatus:h,QuestionId:d[l].PKTestQuestionId||d[l].QuestionId,SelectedOptionId:r};const L={...c,Questions:d,PreviousQuestion:c.Questions[l]};A(L);try{const b=te(L,l,d[l]);if(!b)return;console.log("Persisting option selection"),await T(!1,!0,b,!1)}catch(b){console.error("Failed to persist option selection:",b)}},[o,z,l,c,T]),hs=n.useCallback(s=>{if(!c||!o)return;const a=o.options?.some(i=>i.isSelectedOption),t=s?a?3:2:a?1:0,r=[...c.Questions];r[l]={...r[l],isMarkedforReview:s,QuestionStatus:t},A({...c,Questions:r})},[c,o,l]),V=n.useCallback(async(s=!1)=>{if(!c)return;if(C&&!s){console.log("Exam already over, skipping updateBuyerTest");return}const a=s?{...c,Status:2}:c;let t=te(a,l,c.Questions[l]);if(t){s&&t.Questions&&(t={...t,Questions:t.Questions.map(r=>{const i=r.options?.filter(d=>d.isSelectedOption).map(d=>d.PKOptionId).filter(Boolean).join(","),h=i?`${i},`:"";return{...r,QuestionId:r.PKTestQuestionId||r.QuestionId||"",SelectedOptionId:h||r.SelectedOptionId||"",MarksScoredForthisQuestion:r.MarksScoredForthisQuestion||0}}),PreviousQuestion:t.PreviousQuestion?{...t.PreviousQuestion,QuestionId:t.PreviousQuestion.PKTestQuestionId||t.PreviousQuestion.QuestionId||"",MarksScoredForthisQuestion:t.PreviousQuestion.MarksScoredForthisQuestion||0}:{}},console.log("Payload being sent to backend:",JSON.stringify(t,null,2)));try{const r=s,i=!0;console.log("Calling getCurrentExamQuestion with:",{isExamOver:r,isUpdate:i});const h=await T(r,i,t);s&&h&&(be(!0),A(h))}catch(r){console.error("Failed to update buyer test:",r)}}},[c,l,T,C]),fs=n.useCallback(async()=>{await V(!0),be(!0);const s=c?.PKBuyerTestId;if(s)try{const a={PathId:p,TestSuiteTitle:H?.TestSuiteTitle||"Exam"},t=await As(a);console.log("Navigating to ExamReview with suite token:",t?.slice(0,48)),u(`/exam-review/${s}?suite=${encodeURIComponent(t)}`,{replace:!0})}catch{console.warn("Failed to encrypt suite payload; navigating without token"),u(`/exam-review/${s}`,{replace:!0})}else console.warn("BuyerTestId not available; returning to exam list"),u(`/exams/${p}`,{replace:!0})},[V,c,u,p]),ps=n.useCallback(async()=>{console.log("Review submitted:",{rating:q,testHelpfulness:W,testReview:de}),Ce(!1),u(`/exams/${p}`)},[q,W,de,u,p]),xs=n.useCallback(()=>{ge(!0)},[]),gs=n.useCallback(()=>{ge(!1)},[]),Qe=n.useCallback(async()=>{await V(!1),u(`/exams/${p}`)},[V,u,p]),Te=n.useCallback(()=>{ee(!0)},[]);n.useCallback(async()=>{console.log("Unlocking questions for:",H?.TotalPriceInDollars),ee(!1)},[H]);const g=n.useCallback(async(s,a=1)=>{if(s)try{const r=[].map(i=>({...i,isExpanded:!1,RepliesCount:i.Replies?.length||0}));B(r),Ae(r[0]?.TotalComments||0)}catch(t){console.error("Error fetching comments:",t)}},[K]);n.useCallback(async s=>{if(s.preventDefault(),!Y||Y.trim().length<2){alert("Comment must be more than one character");return}if(!(!f||!j||!o?.PKTestQuestionId)){Y.trim(),o.PKTestQuestionId;try{oe(""),_(1),o.PKTestQuestionId&&await g(o.PKTestQuestionId,1),alert("Your comment has been successfully added")}catch(a){console.error("Error adding comment:",a),alert("Failed to add comment")}}},[Y,f,j,o,g]),n.useCallback(s=>{We(s.Comment),B(a=>a.map(t=>t.PKCommentId===s.PKCommentId?{...t,IsEdit:!0}:t))},[]),n.useCallback(async s=>{if(s.Comment===X){B(a=>a.map(t=>t.PKCommentId===s.PKCommentId?{...t,IsEdit:!1}:t));return}if(s.Comment.trim().length<2){alert("Your comment must be more than one character");return}try{B(a=>a.map(t=>t.PKCommentId===s.PKCommentId?{...t,IsEdit:!1}:t)),alert("Your comment has been successfully updated")}catch(a){console.error("Error updating comment:",a),alert("Failed to update comment")}},[X]),n.useCallback(s=>{B(a=>a.map(t=>t.PKCommentId===s.PKCommentId?{...t,Comment:X,IsEdit:!1}:t))},[X]),n.useCallback(s=>{le(s),ie(!0)},[]);const bs=n.useCallback(async()=>{if(!(!ve||!o))try{alert("Your comment has successfully deleted");const s=ye.length===1?Math.max(x-1,1):x;_(s),o.PKTestQuestionId&&await g(o.PKTestQuestionId,s),ie(!1),le(null)}catch(s){console.error("Error deleting comment:",s),alert("Failed to delete comment")}},[ve,o,ye.length,x,g]);n.useCallback(async s=>{if(f){s.PKCommentId,s.FKInterviewQuestionId;try{alert("Voted successfully"),s.FKInterviewQuestionId&&await g(s.FKInterviewQuestionId,x)}catch(a){console.error("Error voting on comment:",a),alert("Failed to vote")}}},[f,x,g]),n.useCallback(async s=>{if(!J||J.trim().length<2){alert("Comment must be more than one character");return}if(!(!f||!j||!o?.PKTestQuestionId)){J.trim(),o.PKTestQuestionId;try{alert("Replied Successfully"),Ve(-1),re(""),o.PKTestQuestionId&&await g(o.PKTestQuestionId,x)}catch(a){console.error("Error replying to comment:",a),alert("Failed to add reply")}}},[J,f,j,o,x,g]),n.useCallback(async s=>{if(!G||G.trim().length<2){alert("Comment must be more than one character");return}({...s,Comment:G.trim()});try{o?.PKTestQuestionId&&await g(o.PKTestQuestionId,x),Be(""),$e(-1)}catch(a){console.error("Error editing reply:",a),alert("Failed to edit reply")}},[G,o,x,g]),n.useCallback(async s=>{try{o?.PKTestQuestionId&&await g(o.PKTestQuestionId,x)}catch(a){console.error("Error deleting reply:",a),alert("Failed to delete reply")}},[o,x,g]),n.useCallback((s,a)=>{K!=="Admin"&&(Ye(s),Je(a),Z(!0))},[K]);const ws=n.useCallback(async()=>{if(f){o?.PKTestQuestionId;try{alert("Reported successfully"),Z(!1)}catch(s){console.error("Error reporting comment:",s),alert("Failed to report comment"),Z(!1)}}},[He,o,f]);return n.useCallback(s=>{B(a=>a.map((t,r)=>r===s?{...t,isExpanded:!t.isExpanded}:t))},[]),n.useCallback((s,a=!1)=>{s.trim()===""?(a?re(""):oe(""),Ie(!0)):(a?re(s):oe(s),Ie(!1))},[]),n.useCallback(async s=>{if(!o)return;const t=Math.ceil(Ne/5);let r=x;s==="next"&&x<t?r=x+1:s==="prev"&&x>1&&(r=x-1),r!==x&&(_(r),o.PKTestQuestionId&&await g(o.PKTestQuestionId,r))},[o,x,Ne,g]),n.useEffect(()=>{let s=!0;return(async()=>{if(!(!p||!f))try{console.log("Fetching test suite details for PathId:",p);const t=await Ee(p,f);if(!s)return;t&&(Oe(t),M||De(t.TestSuiteTitle||"Exam"))}catch(t){console.error("Error fetching suite details:",t)}})(),()=>{s=!1}},[p,f]),n.useEffect(()=>{let s=!0;return(async()=>{if(!(!O||!f))try{const t=await Re(O,f,!1);s&&Fe(t)}catch(t){console.error("Error checking subscription:",t)}finally{s&&ns(!1)}})(),()=>{s=!1}},[O,f,U,M]),n.useEffect(()=>{let s=!0;return(async()=>{if(!(!O||!f))try{ke(!0);const t=await Me(O,f,I,void 0,!1);if(!s)return;if(t&&t.Questions){const r=t.Questions.some(d=>d.QuestionStatus===1||d.QuestionStatus===3);K==="Student"&&(P||E)&&!r&&(t.Questions=Hs(t.Questions));const i=t.Questions.length,h=Math.ceil(i*.2);Ue(h),!P&&!E&&K==="Student"?t.Questions=t.Questions.map((d,L)=>({...d,QuestionId:d.PKTestQuestionId||d.QuestionId,MarksScoredForthisQuestion:d.MarksScoredForthisQuestion||0,Flag:L<h})):t.Questions=t.Questions.map(d=>({...d,QuestionId:d.PKTestQuestionId||d.QuestionId,MarksScoredForthisQuestion:d.MarksScoredForthisQuestion||0,Flag:!0})),console.log("Test ViewModel loaded:",t),A(t),xe(t.CurrentQuestionIndex||0),Le(!0)}}catch(t){console.error("Error fetching test view model:",t)}finally{s&&ke(!1)}})(),()=>{s=!1}},[O,f,I,P,E,K]),n.useEffect(()=>{if(!ae||!c||C)return;const s=c.Questions?.[l];if(s?.options&&s.options.length>0){console.log("Question already has options, skipping fetch");return}(async()=>{try{const t=te(c,l);if(!t){console.error("Failed to build initial payload");return}console.log("Fetching initial question data for index:",l);const r=await T(!1,!1,t,!1);if(console.log("Initial question data received:",r),r){const i=[...c.Questions],h=i[l],d=h?.SelectedOptionId??r.SelectedOptionId??"",L=d.split(",").filter(Boolean),Q=(r.options||r.Options||[]).map(($,fe)=>{const pe=h?.options?.[fe],js=L.includes(String($.PKOptionId||$.pkOptionId||""));return{...$,isSelectedOption:js||pe?.isSelectedOption||$.isSelectedOption||!1}});i[l]={...h||{},Description:r.Description||h?.Description,ImageUrl:r.ImageUrl||h?.ImageUrl,options:Q,ModuleName:r.ModuleName||h?.ModuleName,Explanation:r.Explanation||h?.Explanation,CourseURL:r.CourseURL||h?.CourseURL,ThumbNailes:r.ThumbNailes||h?.ThumbNailes,QuestionStatus:h?.QuestionStatus??r.QuestionStatus,isMarkedforReview:h?.isMarkedforReview??r.isMarkedforReview,SelectedOptionId:d,PKTestQuestionId:h?.PKTestQuestionId??r.PKTestQuestionId},A({...c,Questions:i})}}catch(t){console.error("Failed to fetch initial question:",t)}})()},[ae,c,l,T]),n.useEffect(()=>{const s=a=>{c&&!C&&(V(!1),localStorage.setItem("Reloaded","true"),localStorage.setItem("CurrentTestMode",I.toString()))};return window.addEventListener("beforeunload",s),()=>{window.removeEventListener("beforeunload",s)}},[c,C,I,V]),n.useEffect(()=>{o?.PKTestQuestionId&&(_(1),g(o.PKTestQuestionId,1))},[o?.PKTestQuestionId,g]),n.useEffect(()=>{const s=()=>he(!0),a=()=>he(!1);return window.addEventListener("online",s),window.addEventListener("offline",a),he(navigator.onLine),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",a)}},[]),n.useEffect(()=>{const s=t=>{t.preventDefault(),alert("You are not allowed to do that")},a=t=>{(t.ctrlKey||t.metaKey)&&(t.key==="c"||t.key==="v")&&(t.preventDefault(),alert("You are not allowed to do that"))};return document.addEventListener("contextmenu",s),document.addEventListener("keydown",a),()=>{document.removeEventListener("contextmenu",s),document.removeEventListener("keydown",a)}},[]),n.useEffect(()=>()=>{os.current=!1},[]),ss||!ae||ts?e.jsx("div",{className:"w-full min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[e.jsx(m,{className:"h-8 w-2/3 mb-4"}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsx(m,{className:"h-6 w-32"}),e.jsx(m,{className:"h-6 w-32"}),e.jsx(m,{className:"h-6 w-32"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(m,{className:"h-10 w-48"}),e.jsx(m,{className:"h-10 w-32"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(m,{className:"h-7 w-48"}),e.jsx(m,{className:"h-10 w-24"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(m,{className:"h-6 w-full mb-3"}),e.jsx(m,{className:"h-6 w-5/6 mb-3"}),e.jsx(m,{className:"h-6 w-4/6"})]}),e.jsx(m,{className:"h-64 w-full mb-6",rounded:"rounded-lg"}),e.jsx("div",{className:"space-y-4 mb-6",children:[1,2,3,4].map(s=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsx(m,{className:"h-5 w-3/4"})},s))}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(m,{className:"h-12 flex-1",rounded:"rounded-md"}),e.jsx(m,{className:"h-12 w-32",rounded:"rounded-md"})]})]})}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[e.jsx(m,{className:"h-6 w-32 mb-4"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:Array.from({length:15}).map((s,a)=>e.jsx(m,{className:"h-10 w-10",rounded:"rounded-md"},a))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsx(m,{className:"h-6 w-40 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(m,{className:"h-4 w-full"}),e.jsx(m,{className:"h-4 w-5/6"}),e.jsx(m,{className:"h-4 w-4/6"})]})]})]})]})]})}):e.jsxs("div",{className:`w-full min-h-screen ${v?"blur-sm":""}`,children:[e.jsx("style",{children:zs}),e.jsxs("div",{className:"p-4",children:[e.jsx("nav",{className:"mb-4 hidden md:block",children:e.jsxs("ol",{className:"flex items-center gap-2 text-sm text-text-secondary",children:[e.jsx("li",{children:e.jsx(Pe,{to:"/",className:"hover:text-primary-blue",children:"Home"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(Pe,{to:"/mock-exams",className:"hover:text-primary-blue",children:"Tests"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx("button",{onClick:Qe,className:"hover:text-primary-blue",children:M})}),e.jsx("li",{children:"/"}),e.jsx("li",{className:"font-semibold text-text-primary",children:I===1?"Quiz":"Practice"})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-text-primary",children:[M," (",I===1?"Quiz":"Practice",")"]}),!P&&!E&&e.jsx(w,{variant:Ke>=(H?.TotalPriceInDollars||0)?"primary":"secondary",onClick:Te,className:"whitespace-nowrap",children:"Unlock Questions"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsx("div",{className:"lg:col-span-9",children:as?e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(m,{className:"h-7 w-48"}),e.jsx(m,{className:"h-10 w-32"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(m,{className:"h-6 w-full mb-3"}),e.jsx(m,{className:"h-6 w-5/6 mb-3"}),e.jsx(m,{className:"h-6 w-4/6"})]}),e.jsx("div",{className:"space-y-4 mb-6",children:[1,2,3,4].map(s=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsx(m,{className:"h-5 w-3/4"})},s))}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{className:"h-10 w-10"}),e.jsx(m,{className:"h-10 w-10"})]}),e.jsx(m,{className:"h-12 w-24"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{className:"h-10 w-10"}),e.jsx(m,{className:"h-10 w-10"})]})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-6",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-lg font-semibold",children:["Question: ",e.jsxs("span",{className:"text-primary-blue",children:[String(l+1).padStart(2,"0")," of ",S.length]})]}),e.jsxs("span",{className:"text-sm bg-light-blue text-primary-blue px-3 py-1 rounded-md",children:[e.jsx("strong",{children:"Domain:"})," ",o?.ModuleName||M]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[I===1&&e.jsx("button",{onClick:xs,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors",title:"Pause",children:e.jsx(ks,{className:"text-gray-700"})}),I===0&&e.jsx("button",{onClick:Qe,className:"p-2 rounded-full bg-red-100 hover:bg-red-200 transition-colors",title:"Close",children:e.jsx(Qs,{className:"text-red-600"})})]})]}),o?.Description?e.jsx("div",{className:"html-content prose prose-sm md:prose-base max-w-none mb-6",style:{wordWrap:"break-word",overflowWrap:"break-word"},dangerouslySetInnerHTML:{__html:o.Description}}):"",o?.ImageUrl&&e.jsx("img",{src:o.ImageUrl,alt:"Question",className:"max-w-full h-auto rounded-lg mb-6"}),e.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 text-green-700 px-4 py-3 mb-4 rounded",children:z?"Please select all correct answers":"Please select the correct answer"}),e.jsx("div",{className:"space-y-3 mb-6",children:o?.options&&o.options.length>0?o.options.map((s,a)=>{const t=s.isSelectedOption,r=D&&s.IsCorrect,i=D&&t&&!s.IsCorrect;return e.jsxs("label",{className:`flex items-start gap-4 p-4 rounded-xl border-2 cursor-pointer transition-all
                          ${r?"border-green-500 bg-green-50":""}
                          ${i?"border-red-500 bg-red-50":""}
                          ${!D&&t?"border-primary-blue bg-light-blue":""}
                          ${!D&&!t?"border-border hover:border-primary-blue":""}
                        `,children:[e.jsx("input",{type:z?"checkbox":"radio",checked:t||!1,onChange:()=>ms(a),disabled:v||C,className:"mt-1"}),e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsxs("span",{className:"font-semibold text-text-secondary flex-shrink-0",children:[se[a],"."]}),s.Description?e.jsx("div",{className:"html-content prose prose-sm max-w-none flex-1",style:{wordWrap:"break-word",overflowWrap:"break-word"},dangerouslySetInnerHTML:{__html:s.Description}}):e.jsxs("span",{className:"flex-1",children:["Option ",se[a]]})]}),s.ImageUrl&&e.jsx("img",{src:s.ImageUrl,alt:`Option ${se[a]}`,className:"max-w-xs h-auto rounded"})]},a)}):""}),I===0&&e.jsx("div",{className:"mb-6",children:e.jsx(w,{variant:"secondary",onClick:()=>we(!D),className:"w-full",children:e.jsx("span",{className:"flex items-center justify-center gap-2",children:D?e.jsxs(e.Fragment,{children:["Hide Answer ",e.jsx(Ts,{})]}):e.jsxs(e.Fragment,{children:["Show Answer ",e.jsx(Ps,{})]})})})}),(I===0||C)&&D&&e.jsxs("div",{className:"bg-gray-50 border border-border rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("strong",{className:"text-lg",children:["Correct Answer",z?"s":"",": "]}),e.jsx("span",{className:"text-primary-blue font-semibold",children:o?.options?.map((s,a)=>s.IsCorrect?se[a]:null).filter(Boolean).join(", ")||"Not available"})]}),o?.Explanation&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold text-lg mb-3",children:"Explanation:"}),e.jsx("div",{className:"html-content prose prose-sm md:prose-base max-w-none",style:{wordWrap:"break-word",overflowWrap:"break-word"},dangerouslySetInnerHTML:{__html:o.Explanation}})]}),o?.CourseURL&&o?.ThumbNailes&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Related Courses:"}),e.jsxs("a",{href:o.CourseURL,target:"_blank",rel:"noopener noreferrer",className:"block max-w-xs",children:[e.jsx("img",{src:o.ThumbNailes,alt:"Course",className:"w-full rounded-lg shadow-md hover:shadow-lg transition-shadow"}),e.jsx("p",{className:"text-center mt-2 text-primary-blue font-semibold",children:M})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{variant:"secondary",size:"small",onClick:ds,disabled:l===0||v,children:e.jsx(Es,{})}),e.jsx(w,{variant:"secondary",size:"small",onClick:cs,disabled:l===0||v||!E&&!P&&l>je,children:e.jsx(Ms,{})})]}),e.jsx(w,{variant:"primary",onClick:fs,disabled:v||!P&&!E,className:"!bg-green-600 hover:!bg-green-700",children:"Finish"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{variant:"secondary",size:"small",onClick:is,disabled:l===S.length-1||v||!P&&l>=je-1&&!E,children:e.jsx(Rs,{})}),e.jsx(w,{variant:"secondary",size:"small",onClick:us,disabled:l===S.length-1||v||!P&&!E,children:e.jsx(Fs,{})})]})]})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-border p-6 sticky top-4",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsxs("label",{className:"flex items-center justify-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o?.isMarkedforReview||!1,onChange:s=>hs(s.target.checked)}),e.jsx("span",{className:"font-semibold",children:"Mark for Review"})]})}),e.jsx("hr",{className:"my-4 border-border"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:S.map((s,a)=>{const t=s.QuestionStatus||0,r=t===1||t===3,i=t===2||t===3,h=a===l,d=!s.Flag;return e.jsx("button",{onClick:()=>s.Flag?k(a):Te(),className:`h-12 rounded-md font-semibold transition-all relative
                        ${h?"ring-2 ring-primary-blue ring-offset-2":""}
                        ${d?"bg-gray-300 text-gray-600":""}
                        ${!d&&r&&!i?"bg-green-500 text-white":""}
                        ${!d&&i?"bg-yellow-500 text-white":""}
                        ${!d&&!r&&!i?"bg-gray-100 text-text-primary":""}
                      `,disabled:v,children:d?e.jsx(Ks,{className:"mx-auto"}):a+1},a)})})]})})]})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-2xl text-center max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Exam Paused"}),e.jsxs(w,{variant:"primary",onClick:gs,className:"mt-6 !px-8",children:[e.jsx(Os,{className:"mr-2"})," Resume"]})]})}),Xe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Review"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"mb-3 font-semibold",children:"How satisfied were you with this practice exam on a scale of 5?"}),e.jsx("div",{className:"flex gap-2 justify-center",children:[1,2,3,4,5].map(s=>e.jsx("button",{onClick:()=>Ze(s),onMouseEnter:()=>Se(s),onMouseLeave:()=>Se(0),className:"text-3xl transition-colors",children:e.jsx("span",{className:s<=(qe||q)?"text-yellow-400":"text-gray-300",children:"★"})},s))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"mb-3 font-semibold",children:"How helpful will this test be for your Certification?"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"helpfulness",value:"Worth taking it",checked:W==="Worth taking it",onChange:s=>ce(s.target.value)}),e.jsx("span",{children:"Worth taking it"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"helpfulness",value:"Might be Helpful",checked:W==="Might be Helpful",onChange:s=>ce(s.target.value)}),e.jsx("span",{children:"Might be Helpful"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"helpfulness",value:"Not Much",checked:W==="Not Much",onChange:s=>ce(s.target.value)}),e.jsx("span",{children:"Not Much"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"mb-3 font-semibold",children:"Describe your Experience"}),e.jsx("textarea",{value:de,onChange:s=>es(s.target.value),className:"w-full border border-border rounded-lg p-3 min-h-[120px]",placeholder:"Share your feedback..."})]}),e.jsxs("div",{className:"flex gap-4 justify-end",children:[e.jsx(w,{variant:"secondary",onClick:()=>Ce(!1),children:"Skip"}),e.jsx(w,{variant:"primary",onClick:ps,disabled:!q,children:"Submit Review"})]})]})}),ze&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-2xl max-w-md w-full",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Delete Comment"}),e.jsx("p",{className:"mb-6",children:"Are you sure you want to delete this comment?"}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(w,{variant:"primary",onClick:bs,children:"Yes"}),e.jsx(w,{variant:"secondary",onClick:()=>{ie(!1),le(null)},children:"No"})]})]})}),Ge&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-2xl max-w-md w-full",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Report Comment"}),e.jsxs("p",{className:"mb-6",children:["Is the comment made by ",e.jsx("strong",{children:_e})," Spam or Abusive?"]}),e.jsxs("div",{className:"flex gap-4 justify-end",children:[e.jsx(w,{variant:"primary",onClick:ws,children:"Yes"}),e.jsx(w,{variant:"secondary",onClick:()=>Z(!1),children:"No"})]})]})}),e.jsx(Ds,{isOpen:ue,onClose:()=>ee(!1),supportMessage:ls}),!rs&&e.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-600 text-white px-6 py-3 rounded-lg shadow-lg z-50",children:[e.jsx("p",{className:"font-semibold",children:"⚠️ No Internet Connection"}),e.jsx("p",{className:"text-sm",children:"Please check your network and try again"})]})]})};export{Nt as default};
